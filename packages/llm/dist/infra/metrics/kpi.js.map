{"version":3,"file":"kpi.js","sourceRoot":"","sources":["../../../src/infra/metrics/kpi.ts"],"names":[],"mappings":"AAAA,MAAM,UAAU,WAAW,CAAC,CAO3B;IACC,MAAM,OAAO,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAEhE,OAAO;QACL,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,CAAC;QACzC,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC;QAC9C,mBAAmB,EAAE,OAAO,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,gBAAgB,CAAC;QACrE,qBAAqB,EAAE,OAAO,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC;KACvD,CAAC;AACJ,CAAC","sourcesContent":["export function computeKPIs(m: {\n  requests: number;\n  attempts: number;\n  retries: number;\n  fallbacks: number;\n  recoveryAttempts: number;\n  recoverySuccesses: number;\n}) {\n  const safeDiv = (a: number, b: number) => (b === 0 ? 0 : a / b);\n\n  return {\n    retryRate: safeDiv(m.retries, m.attempts),\n    fallbackRate: safeDiv(m.fallbacks, m.requests),\n    recoverySuccessRate: safeDiv(m.recoverySuccesses, m.recoveryAttempts),\n    avgAttemptsPerRequest: safeDiv(m.attempts, m.requests),\n  };\n}\n"]}